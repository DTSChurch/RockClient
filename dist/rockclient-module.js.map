{"mappings":"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","sources":["src/index.js"],"sourcesContent":["\r\nconst _fetch = window.fetch\r\nconst _Rock = window.Rock\r\n\r\nfunction _createCache () {\r\n  const _cache = new Map()\r\n\r\n  function hasExpired (time) {\r\n    return time < Date.now()\r\n  }\r\n\r\n  return {\r\n    _set: async function (key, value, ttl) {\r\n      const _value = [value]\r\n      if (ttl) {\r\n        _value.push(new Date(Date.now() + ttl).getTime())\r\n      }\r\n\r\n      _cache.set(key, _value)\r\n      return value\r\n    },\r\n    resolve: async function (key, value, ttl) {\r\n      const _storedValue = _cache.get(key)\r\n      if (_storedValue === undefined && value === undefined) {\r\n        return undefined\r\n      }\r\n\r\n      if (_storedValue === undefined && value !== undefined) {\r\n        const _newValue = (typeof value === 'function') ? await value() : value\r\n        this._set(key, _newValue, ttl)\r\n        return _newValue\r\n      }\r\n\r\n      const [_cachedValue, _ttl] = _storedValue\r\n      if (hasExpired(_ttl)) {\r\n        if (value !== undefined) {\r\n          const _newValue = (typeof value === 'function') ? await value() : value\r\n          this._set(key, _newValue, ttl)\r\n          return _newValue\r\n        }\r\n\r\n        _cache.delete(key)\r\n        return undefined\r\n      }\r\n\r\n      return _cachedValue\r\n    },\r\n    delete: async function (key, contains) {\r\n      if (contains) {\r\n        const keys = Array.from(_cache.keys())\r\n        keys.forEach(_key => {\r\n          if (_key.indexOf(key) >= 0) {\r\n            _cache.delete(_key)\r\n          }\r\n        })\r\n      }\r\n\r\n      _cache.delete(key)\r\n    },\r\n    clear: async function () {\r\n      _cache.clear()\r\n    }\r\n  }\r\n}\r\n\r\nexport class RockClient {\r\n  constructor (config) {\r\n    if (_fetch === undefined) {\r\n      throw new Error('Unsupported Browser')\r\n    }\r\n\r\n    config = config || {}\r\n\r\n    if (_Rock && config.url === undefined) {\r\n      this.url = `${window.location.origin}/api`\r\n      this.sameOrigin = true\r\n    } else {\r\n      this.url = config.url || `${window.location.origin}/api`\r\n      this.username = config.username\r\n      this.password = config.password\r\n      this.token = config.token\r\n      this.sameOrigin = window.location.origin.startsWith(this.url)\r\n    }\r\n\r\n    this.url = this.url.replace(/\\/+/g, '/').replace(/\\/+$/, '')\r\n    if (!this.url.endsWith('/api')) {\r\n      this.url += '/api'\r\n    }\r\n\r\n    this._memoryCache = _createCache()\r\n  }\r\n\r\n  async authenticate () {\r\n    if (!this.token && (!this.sameOrigin || (this.username && this.password))) {\r\n      try {\r\n          const response = await _fetch(`${this.url}/Auth/Login`, {  // eslint-disable-line\r\n          method: 'POST',\r\n          body: {\r\n            Username: this.username,\r\n            Password: this.password,\r\n            Persisted: true\r\n          }\r\n        })\r\n\r\n        if (response.ok) {\r\n          this.cookie = response.headers['set-cookie'][0]\r\n\r\n          return Promise.resolve()\r\n        }\r\n\r\n        return Promise.reject(response.status)\r\n      } catch (ex) {\r\n        return Promise.reject(ex)\r\n      }\r\n    }\r\n\r\n    return Promise.resolve()\r\n  }\r\n\r\n  async _request (req, ctx) {\r\n    const _self = ctx || this\r\n\r\n    if (typeof req !== 'object') {\r\n      return Promise.reject(new Error('Invalid config'))\r\n    }\r\n\r\n    try {\r\n      const _url = new URL(`${_self.url}/${req.path}`)\r\n      if (req.params && typeof req.params === 'object') {\r\n        Object.keys(req.params).forEach(key => {\r\n          const value = req.params[key]\r\n          _url.searchParams.set(key, value)\r\n        })\r\n      }\r\n\r\n      const method = req.method || 'GET'\r\n      const headers = (_self.cookie !== undefined) ? { Cookie: _self.cookie } : {}\r\n      if (_self.token) headers['Authorization-Token'] = _self.token\r\n\r\n      const response = await _fetch(_url.href, {\r\n        method,\r\n        headers,\r\n        body: req.data\r\n      })\r\n\r\n      if (response.ok) {\r\n        const data = await response.json()\r\n        return Promise.resolve(data)\r\n      }\r\n\r\n      return Promise.reject(response.status)\r\n    } catch (ex) {\r\n      return Promise.reject(ex)\r\n    }\r\n  }\r\n\r\n  async _cacheRequest (req, ctx) {\r\n    const _self = ctx || this\r\n    const cacheKey = JSON.stringify(req)\r\n    return _self._memoryCache.resolve(cacheKey, () => _self._request(req, ctx), 300000)\r\n  }\r\n\r\n  request (_resource, useCache, ctx) {\r\n    const _self = ctx || this\r\n    const _requestMethod = async function (req) {\r\n      if (useCache) {\r\n        return _self._cacheRequest(req, _self)\r\n      }\r\n\r\n      return _self._request(req, _self)\r\n    }\r\n\r\n    const _obj = {\r\n      method: 'GET',\r\n      path: undefined,\r\n      resource: _resource,\r\n      id: undefined,\r\n      params: {}\r\n    }\r\n\r\n    return {\r\n      method: function (method) {\r\n        _obj.method = method || _obj.method\r\n        return this\r\n      },\r\n      resource: function (resource) {\r\n        _obj.resource = resource || _obj.resource\r\n        return this\r\n      },\r\n      id: function (id) {\r\n        _obj.id = id || _obj.id\r\n        return this\r\n      },\r\n      clearId: function () {\r\n        _obj.id = undefined\r\n        return this\r\n      },\r\n      parameters: function (parameters) {\r\n        const params = parameters || {}\r\n        _obj.params = params\r\n        return this\r\n      },\r\n      addParameter: function (key, value) {\r\n        _obj.params[key] = value\r\n        return this\r\n      },\r\n      removeParameter: function (key) {\r\n        delete _obj.params[key]\r\n        return this\r\n      },\r\n      clearParameters: function () {\r\n        if (_obj.params && typeof _obj.params === 'object') {\r\n          for (const key in _obj.params) delete _obj.params[key]\r\n        }\r\n      },\r\n      body: function (body) {\r\n        _obj.data = body || _obj.data\r\n        return this\r\n      },\r\n      clearBody: function () {\r\n        _obj.data = undefined\r\n        return this\r\n      },\r\n      expand: function (entities) {\r\n        let _entities = entities || ''\r\n        if (Array.isArray(entities)) {\r\n          _entities = entities.join(',').trim()\r\n        }\r\n\r\n        this.addParameter('$expand', _entities)\r\n        return this\r\n      },\r\n      filter: function (query) {\r\n        this.addParameter('$filter', query)\r\n        return this\r\n      },\r\n      select: function (fields) {\r\n        let _fields = fields || ''\r\n        if (Array.isArray(fields)) {\r\n          _fields = fields.join(',').trim()\r\n        }\r\n\r\n        this.addParameter('$select', _fields)\r\n        return this\r\n      },\r\n      orderBy: function (fields) {\r\n        let _fields = fields || ''\r\n        if (Array.isArray(fields)) {\r\n          _fields = fields.join(',').trim()\r\n        }\r\n\r\n        this.addParameter('$orderby', _fields)\r\n        return this\r\n      },\r\n      skip: function (page) {\r\n        this.addParameter('$skip', page)\r\n        return this\r\n      },\r\n      top: function (limit) {\r\n        this.addParameter('$top', limit)\r\n        return this\r\n      },\r\n      request: async function () {\r\n        if (_obj.resource === undefined) {\r\n          return Promise.reject(new Error('Missing Resource'))\r\n        }\r\n\r\n        _obj.path = (_obj.id !== undefined) ? `${_obj.resource}/${_obj.id}` : _obj.resource\r\n        return _requestMethod(_obj)\r\n      },\r\n      getAll: async function () {\r\n        this.clearId().method('GET').request()\r\n      },\r\n      paginate: async function (page, limit) {\r\n        page = page || 0\r\n        limit = limit || 10\r\n\r\n        return this.clearId().addParameter('$skip', page).addParameter('$top', limit).method('GET').request()\r\n      },\r\n      get: async function (id) {\r\n        return this.method('GET').id(id).request()\r\n      },\r\n      find: async function (query) {\r\n        return this.method('GET').addParameter('$filter', query).request()\r\n      },\r\n      post: async function (data) {\r\n        return this.method('POST').body(data).request()\r\n      },\r\n      patch: async function (data) {\r\n        return this.method('PATCH').body(data).request()\r\n      },\r\n      put: async function (data) {\r\n        return this.method('PUT').body(data).request()\r\n      },\r\n      delete: async function (id) {\r\n        return this.method('DELETE').id(id).request()\r\n      }\r\n    }\r\n  }\r\n\r\n  Lava = (function (ctx) {\r\n    return {\r\n      render: async function (template, additionalMergeObjects) {\r\n        const params = {}\r\n        if (additionalMergeObjects) {\r\n          params.additionalMergeObjects = additionalMergeObjects\r\n        }\r\n\r\n        const req = ctx.request('Lava/RenderTemplate')\r\n        if (additionalMergeObjects) {\r\n          req.addParameter('additionalMergeObjects', additionalMergeObjects)\r\n        }\r\n\r\n        let response = await req.post(template)\r\n        if (response && (template.endsWith(' ToJSON }}') || template.endsWith(' ToJSON}}'))) {\r\n          response = JSON.parse(response)\r\n        }\r\n\r\n        return Promise.resolve(response)\r\n      }\r\n    }\r\n  })(this)\r\n\r\n  Utility = (function (ctx) {\r\n    return {\r\n      RockDateTime: {\r\n        TimeUnit: class {\r\n          static Years = 'y'\r\n          static Months = 'M'\r\n          static Weeks = 'w'\r\n          static Days = 'd'\r\n          static Hours = 'h'\r\n          static Minutes = 'm'\r\n          static Seconds = 's'\r\n        },\r\n        DateTimeFormat: class {\r\n          static ISO8601 = 'yyyy-MM-ddTHH:mm:ssK'\r\n        },\r\n        _getDate: async function (template) {\r\n          const response = await ctx.Lava.render(template)\r\n          if (response) {\r\n            try {\r\n              const dt = new Date(response)\r\n              if (dt.toISOString()) return Promise.resolve(dt) // toISOString will throw an error if the date could not parse\r\n            } catch (ex) {\r\n              return Promise.reject(ex)\r\n            }\r\n          }\r\n\r\n          return Promise.reject(new Error('Invalid Server Response'))\r\n        },\r\n        now: async function () {\r\n          return this._getDate(\"{{ 'Now' | Date:'yyyy-MM-ddTHH:mm:ssK' }}\")\r\n        },\r\n        add: async function (interval, timeUnit, date) {\r\n          if (interval === undefined) {\r\n            return Promise.reject(new Error('Missing interval arugment'))\r\n          }\r\n\r\n          timeUnit = timeUnit || this.TimeUnit.Days\r\n          date = date || await this.now()\r\n\r\n          const template = `{% assign date = '${date.toISOString()}' | AsDateTime | Date:'yyyy-MM-ddTHH:mm:ssK' %}{{ date | DateAdd:${interval},'${timeUnit}' }}`\r\n          return this._getDate(template)\r\n        },\r\n        iCalDates: async function (ical, occurrences) {\r\n          if (ical === undefined || typeof ical !== 'string') {\r\n            return Promise.reject(new Error('Missing or invalid ical arugment'))\r\n          }\r\n\r\n          occurrences = occurrences || 'All'\r\n\r\n          const template = `{{ ${ical} | DatesFromICal:${occurrences} | ToJSON }}`\r\n          const response = await ctx.Lava.render(template)\r\n          if (response) {\r\n            try {\r\n              const json = (typeof response !== 'object') ? JSON.parse(response) : response\r\n              return Promise.resolve(json)\r\n            } catch (ex) {\r\n              return Promise.reject(ex)\r\n            }\r\n          }\r\n\r\n          return Promise.reject(new Error('Invalid Server Response'))\r\n        },\r\n        humanize: async function (date) {\r\n          date = date || await this.now()\r\n\r\n          const template = `{% assign date = '${date.toISOString()}' | AsDateTime | Date:'yyyy-MM-ddTHH:mm:ssK' %}{{ date | HumanizeDateTime }}`\r\n          const response = await ctx.Lava.render(template)\r\n          if (response) {\r\n            return Promise.resolve(response)\r\n          }\r\n\r\n          return Promise.reject(new Error('Invalid Server Response'))\r\n        },\r\n        sunday: async function (date, week) {\r\n          date = date || await this.now()\r\n          const template = (week === undefined) ? `{% assign date = '${date.toISOString()}' | AsDateTime | Date:'yyyy-MM-ddTHH:mm:ssK' %}{{ date | SundayDate }}` : `{% assign date = '${date.toISOString()}' | AsDateTime | Date:'yyyy-MM-ddTHH:mm:ssK' %}{{ date | SundayDate | DateAdd:${week * 7} }}`\r\n          return this._getDate(template)\r\n        }\r\n      }\r\n    }\r\n  })(this)\r\n}\r\n\r\nwindow.DTS = window.DTS || {}\r\nwindow.DTS.RockClient = RockClient\r\n"],"names":[],"version":3,"file":"rockclient-module.js.map","sourceRoot":"../"}